(function(){if(!this.require){var a={},b={},c=function(f,g){var h=d(g,f),i=b[h],j;if(i)return i.exports;if(!(j=a[h]||a[h=d(h,"./index")]))throw"module '"+f+"' not found";i={id:h,exports:{}};try{return b[h]=i,j(i.exports,function(a){return c(a,e(h))},i),i.exports}catch(k){throw delete b[h],k}},d=function(a,b){var c=[],d,e;/^\.\.?(\/|$)/.test(b)?d=[a,b].join("/").split("/"):d=b.split("/");for(var f=0,g=d.length;f<g;f++)e=d[f],e==".."?c.pop():e!="."&&e!=""&&c.push(e);return c.join("/")},e=function(a){return a.split("/").slice(0,-1).join("/")};this.require=function(a){return c(a,"")},this.require.define=function(b){for(var c in b)a[c]=b[c]}}return this.require.define}).call(this)({"boneidle.chain":function(a,b,c){function d(a){function c(a,d){var e=b.pop();e(a,function(e){e.isRight()&&b.length>0?c(a,d):d(e)})}var b=[a];this.and=function(a){return b.unshift(a),this},this.call=function(a,b){c(a,b)}}function e(a){return new d(a)}c.exports={Chain:d,chain:e}},"boneidle.either":function(a,b,c){function d(a){return new f(!0,a)}function e(a){return new f(!1,a)}function f(a,b){var c,d;a?c=b:d=b,this.isLeft=function(){return a},this.isRight=function(b){return!a},this.left=function(){return c},this.right=function(){return d},this.value=function(){return a?c:d}}c.exports={Either:f,left:d,right:e}},"boneidle.iterators":function(a,b,c){function g(){this.hasNext=function(a){},this.next=function(a){}}function h(a,b){this.prototype=new g,this.hasNext=a.hasNext,this.next=function(c){if(c){a.next(function(a){r(b,a,c)});return}return b(a.next())}}function i(a,b){function d(a,b,c){a.hasNext(function(e){e?a.next(function(e){var f=b(e);f.hasNext(function(e){e?c(!0,f):d(a,b,c)})}):c(!1)})}var c;this.hasNext=function(e){c?c.hasNext(function(f){f?e(!0):(c=null,d(a,b,function(a,b){a?(c=b,e(!0)):e(!1)}))}):d(a,b,function(a,b){a?(c=b,e(!0)):e(!1)})},this.next=function(a){c.next(a)}}function j(a){this.prototype=new g;var b=0;this.hasNext=function(c){c(b<a.length)},this.next=function(c){c(a[b++])}}function k(a){function c(d){a[b].hasNext(function(e){e?d(!0):b<a.length-1?(b++,c(d)):d(!1)})}this.prototype=new g;var b=0;this.hasNext=function(a){c(a)},this.next=function(c){a[b].next(function(a){c(a)})}}function l(a){this.prototype=new g;var b=Object.keys(a),c=new j(b);this.hasNext=c.hasNext,this.next=function(b){c.next(function(c){b(new d.NameValue(c,a[c]))})}}function m(a,b){var c;this.hasNext=function(d){f.firstMatch(a,b,function(a){c=a,a.isEmpty()?d(!1):d(!0)})},this.next=function(d){c?d(t(c).get()):firstMatch(a,b,d)}}function n(a,b){var c=a;this.hasNext=function(){return c<=b},this.next=function(){return c++}}function o(){this.hasNext=function(a){a(!1)},this.next=function(){throw"Empty Iterator"}}function p(a,b){var c;this.hasNext=function(){return c=s(a,b),c.hasNext()},this.next=function(){return c?t(c):s(a,b)}}function q(a){function f(){e=!0,h()}function g(a){d.push(a),h()}function h(){if(c.length>0){var a=c.pop();a()}}var b=this,c=[],d=[],e=!1;a.on("data",g),a.on("error",function(b){g(b),a.emit("close")}),a.on("end",f),a.on("close",f),this.hasNext=function(a){d.length>0?a(!0):c.push(function(){a(!e)})},this.next=function(a){d.length>0?a(d.pop()):c.push(function(){a(d.pop())})}}function r(a,b,c){a instanceof e.FunctionWithCallbackWrapper?a.func(b,c):c(a(b))}function s(a,b){var c=[],d;while((d=a.next())&&!b(d))c.push(d);return sequence(c)}function t(a){var b=a;return a=null,b}var d=b("./boneidle.namevalue"),e=b("./boneidle.markers"),f=b("./boneidle.shared");c.exports={Iterator:g,MapIterator:h,FlatMapIterator:i,ArrayIterator:j,JoinedIterator:k,ObjectIterator:l,FilterIterator:m,RangeIterator:n,EmptyIterator:o,SplitOnIterator:p,StreamIterator:q}},boneidle:function(a,b,c){function m(){return arguments.length==0?new r(new d.EmptyIterator):arguments.length==1?arguments[0]instanceof Array?new r(new d.ArrayIterator(arguments[0])):arguments[0]instanceof d.Iterator?new r(arguments[0]):new r(new d.ObjectIterator(arguments[0])):new r(new d.ArrayIterator(arguments))}function n(){return new q(m.apply(null,arguments))}function o(a){return new r(new d.StreamIterator(a))}function p(a,b){return new r(new d.RangeIterator(a,b))}function q(a){this.sequence=a,this.map=function(a){return new q(this.sequence.map(a))},this.flatMap=function(a){return new q(this.sequence.flatMap(a))},this.realise=function(a){this.sequence.realise.call(this,function(b){console.log("Realise returned",b),a(b)})},this.hasNext=function(a){this.sequence.hasNext(function(b){console.log("HasNext :",b),a(b)})},this.next=function(a){this.sequence.next(function(b){console.log("Next :",b),a(b)})}}function r(a){var b=this;this.map=function(b){return new r(new d.MapIterator(a,b))},this.flatMap=function(b){return new r(new d.FlatMapIterator(a,b))},this.foldLeft=function(b,c,d){t(b,a,d,function(a,b,d,e,g){c instanceof f.FunctionWithCallbackWrapper?c.func(a,d,function(a){t(a,b,e,g)}):(a=c(a,d),t(a,b,e,g))})},this.head=function(b){a.hasNext(function(c){c?a.next(function(a){b(h.some(a))}):b(h.none())})},this.filter=function(b){return new r(new d.FilterIterator(a,b))},this.find=function(b,c){return g.firstMatch(a,b,c)},this.realise=function(a){t([],this,a,function(a,b,c,d,e){a.push(c),t(a,b,d,e)})},this.splitOn=function(b){return new r(new SplitOnIterator(a,b))},this.take=function(a,c){var d=[],e=new l.Queue;for(var f=0;f<a;f++)e.queue(function(a){b.head(function(b){d.push(b.get()),a()})});e.queue(function(a){c(d)})},this.takeWhile=function(a,c){s(b,[],a,c)},this.join=function(){var a=[b];for(i in arguments)a.push(arguments[i]);return new r(new d.JoinedIterator(a))},this.hasNext=a.hasNext,this.next=a.next}function s(a,b,c,d){a.head(function(e){c(e.get())?(b.push(e.get()),s(a,b,c,d)):d(b)})}function t(a,b,c,d){b.hasNext(function(e){e?b.next(function(e){d(a,b,e,c,d)}):c(a)})}var d=b("./boneidle.iterators"),e=b("./boneidle.namevalue"),f=b("./boneidle.markers"),g=b("./boneidle.shared"),h=b("./boneidle.option"),j=b("./boneidle.either"),k=b("./boneidle.chain"),l=b("./boneidle.queue");c.exports={sequence:m,debug_sequence:n,range:p,option:h,stream:o,either:j,chain:k,namevalue:e,markers:f,iterators:d}},"boneidle.markers":function(a,b,c){function d(a){this.func=a}function e(a){return new d(a)}c.exports={FunctionWithCallbackWrapper:d,usingCallback:e}},"boneidle.namevalue":function(a,b,c){function d(a,b){var c=a,d=b;this.__defineGetter__("name",function(){return c}),this.__defineGetter__("value",function(){return d})}function e(a,b){return new d(a,b)}c.exports={NameValue:d,nameValue:e}},"boneidle.option":function(a,b,c){function d(a,b){this.isEmpty=function(){return a},this.get=function(){return b},this.getOrNull=function(){return a?null:b},this.getOr=function(c){return a?c:b}}function e(a){return new d(!1,a)}function f(){return new d(!0)}c.exports={Option:d,some:e,none:f}},"boneidle.queue":function(a,b,c){function d(){var a=this;this.values=[],this.queue=function(a){this.values.length>0?this.values.push(a):a(this.next)},this.next=function(){if(a.values.length>0){var b=this.values.pop();b()}}}c.exports={Queue:d}},"boneidle.shared":function(a,b,c){function f(a,b,c){a.hasNext(function(g){g?a.next(function(g){b instanceof d.FunctionWithCallbackWrapper?b.func(g,function(d){d?c(e.some(g)):f(a,b,c)}):b(g)?c(e.some(g)):f(a,b,c)}):c(e.none())})}var d=b("./boneidle.markers"),e=b("./boneidle.option");c.exports={firstMatch:f}}});