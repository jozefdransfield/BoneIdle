(function(){if(!this.require){var a={},b={},c=function(f,g){var h=d(g,f),i=b[h],j;if(i)return i.exports;if(!(j=a[h]||a[h=d(h,"./index")]))throw"module '"+f+"' not found";i={id:h,exports:{}};try{return b[h]=i,j(i.exports,function(a){return c(a,e(h))},i),i.exports}catch(k){throw delete b[h],k}},d=function(a,b){var c=[],d,e;/^\.\.?(\/|$)/.test(b)?d=[a,b].join("/").split("/"):d=b.split("/");for(var f=0,g=d.length;f<g;f++)e=d[f],e==".."?c.pop():e!="."&&e!=""&&c.push(e);return c.join("/")},e=function(a){return a.split("/").slice(0,-1).join("/")};this.require=function(a){return c(a,"")},this.require.define=function(b){for(var c in b)a[c]=b[c]}}return this.require.define}).call(this)({"boneidle.chain":function(a,b,c){function d(a){function c(a,d){var e=b.pop();e(a,function(e){!e.isEmpty()&&b.length>0?c(a,d):d(e)})}var b=[a];this.and=function(a){return b.unshift(a),this},this.call=function(a,b){c(a,b)}}c.exports={Chain:d}},"boneidle.either":function(a,b,c){function d(a){return new f(!0,a)}function e(a){return new f(!1,a)}function f(a,b){var c,d;a?c=b:d=b,this.isLeft=function(){return a},this.isRight=function(b){return!a},this.left=function(){return c},this.right=function(){return d},this.value=function(){return a?c:d}}c.exports={Either:f,left:d,right:e}},"boneidle.iterators":function(a,b,c){function f(){this.hasNext=function(a){},this.next=function(a){}}function g(a,b){this.prototype=new f,this.hasNext=a.hasNext,this.next=function(c){if(c){a.next(function(a){b(a,c)});return}return b(a.next())}}function h(a,b){function d(a,b,c){a.hasNext(function(e){e?a.next(function(e){var f=b(e);f.hasNext(function(e){e?c(!0,f):d(a,b,c)})}):c(!1)})}var c;this.hasNext=function(e){c?c.hasNext(function(f){f?e(!0):(c=null,d(a,b,function(a,b){a?(c=b,e(!0)):e(!1)}))}):d(a,b,function(a,b){a?(c=b,e(!0)):e(!1)})},this.next=function(a){c.next(a)}}function i(a){this.prototype=new f;var b=0;this.hasNext=function(c){c(b<a.length)},this.next=function(c){c(a[b++])}}function j(a){function c(d){a[b].hasNext(function(e){e?d(!0):b<a.length-1?(b++,c(d)):d(!1)})}this.prototype=new f;var b=0;this.hasNext=function(a){c(a)},this.next=function(c){a[b].next(function(a){c(a)})}}function k(a){this.prototype=new f;var b=Object.keys(a),c=new i(b);this.hasNext=c.hasNext,this.next=function(b){c.next(function(c){b(new d.Pair(c,a[c]))})}}function l(a,b){var c;this.hasNext=function(d){e.firstMatch(a,b,function(a){c=a,a.isEmpty()?d(!1):d(!0)})},this.next=function(d){c?d(r(c).get()):firstMatch(a,b,d)}}function m(a,b){var c=a;this.hasNext=function(a){a(c<=b)},this.next=function(a){a(c++)}}function n(){this.hasNext=function(a){a(!1)},this.next=function(){throw"Empty Iterator"}}function o(a,b){var c;this.hasNext=function(){return c=q(a,b),c.hasNext()},this.next=function(){return c?r(c):q(a,b)}}function p(a){function f(){e=!0,h()}function g(a){d.push(a),h()}function h(){if(c.length>0){var a=c.pop();a()}}var b=this,c=[],d=[],e=!1;a.on("data",g),a.on("error",function(b){g(b),a.emit("close")}),a.on("end",f),a.on("close",f),this.hasNext=function(a){d.length>0?a(!0):(e&&a(!1),c.push(function(){a(!e)}))},this.next=function(a){d.length>0?a(d.pop()):c.push(function(){a(d.pop())})}}function q(a,b){var c=[],d;while((d=a.next())&&!b(d))c.push(d);return sequence(c)}function r(a){var b=a;return a=null,b}var d=b("./boneidle.tuple"),e=b("./boneidle.shared");c.exports={Iterator:f,MapIterator:g,FlatMapIterator:h,ArrayIterator:i,JoinedIterator:j,ObjectIterator:k,FilterIterator:l,RangeIterator:m,EmptyIterator:n,SplitOnIterator:o,StreamIterator:p}},boneidle:function(a,b,c){function l(){return arguments.length==0?new r(new d.EmptyIterator):arguments.length==1?arguments[0]instanceof Array?new r(new d.ArrayIterator(arguments[0])):arguments[0]instanceof d.Iterator?new r(arguments[0]):new r(new d.ObjectIterator(arguments[0])):new r(new d.ArrayIterator(arguments))}function m(){return new p(l.apply(null,arguments))}function n(a){return new r(new d.StreamIterator(a))}function o(a,b){return new r(new d.RangeIterator(a,b))}function p(a){this.sequence=a,this.map=function(a){return new p(this.sequence.map(a))},this.flatMap=function(a){return new p(this.sequence.flatMap(a))},this.realise=function(a){this.sequence.realise.call(this,function(b){console.log("Realise returned",b),a(b)})},this.hasNext=function(a){this.sequence.hasNext(function(b){console.log("HasNext :",b),a(b)})},this.next=function(a){this.sequence.next(function(b){console.log("Next :",b),a(b)})}}function q(a){return function(){var b=arguments[arguments.length-1],c=Array.prototype.slice.call(arguments,0,arguments.length-1);b(a.apply(null,c))}}function r(a){var b=this;this.map=function(a){return b.map$(q(a))},this.map$=function(b){return new r(new d.MapIterator(a,b))},this.flatMap=function(b){return new r(new d.FlatMapIterator(a,b))},this.foldLeft=function(a,c,d){return b.foldLeft$(a,q(c),d)},this.foldLeft$=function(b,c,d){t(b,a,d,function(a,b,d,e,f){c(a,d,function(a){t(a,b,e,f)})})},this.head=function(b){a.hasNext(function(c){c?a.next(function(a){b(g.some(a))}):b(g.none())})},this.filter=function(a){return b.filter$(q(a))},this.filter$=function(b){return new r(new d.FilterIterator(a,b))},this.find=function(a,c){return b.find$(q(a),c)},this.find$=function(b,c){return f.firstMatch(a,b,c)},this.realise=function(a){t([],this,a,function(a,b,c,d,e){a.push(c),t(a,b,d,e)})},this.splitOn=function(a){return b.splitOn(q(a))},this.splitOn$=function(b){return new r(new SplitOnIterator(a,b))},this.take=function(a,c){var d=[],e=new k.Queue;for(var f=0;f<a;f++)e.queue(function(a){b.head(function(b){d.push(b.get()),a()})});e.queue(function(a){c(d)})},this.takeWhile=function(a,c){b.takeWhile$(q(a),c)},this.takeWhile$=function(a,c){s(b,[],a,c)},this.join=function(){var a=[b];for(i in arguments)a.push(arguments[i]);return new r(new d.JoinedIterator(a))},this.hasNext=a.hasNext,this.next=a.next}function s(a,b,c,d){a.head(function(e){c(e.get(),function(f){f?(b.push(e.get()),s(a,b,c,d)):d(b)})})}function t(a,b,c,d){b.hasNext(function(e){e?b.next(function(e){process.nextTick(function(){d(a,b,e,c,d)})}):c(a)})}var d=b("./boneidle.iterators"),e=b("./boneidle.tuple"),f=b("./boneidle.shared"),g=b("./boneidle.option"),h=b("./boneidle.either"),j=b("./boneidle.chain"),k=b("./boneidle.queue");c.exports=l,l.debug=m,l.chain=function(a){return new j.Chain(a)},l.range=o,l.option=g,l.stream=n,l.either=h,l.pair=function(a,b){return new e.Pair(a,b)},l.iterators=d,l.$=q},"boneidle.option":function(a,b,c){function d(a,b){this.isEmpty=function(){return a},this.get=function(){return b},this.getOrNull=function(){return a?null:b},this.getOr=function(c){return a?c:b}}function e(a){return new d(!1,a)}function f(){return new d(!0)}c.exports={Option:d,some:e,none:f}},"boneidle.queue":function(a,b,c){function d(){var a=this;this.values=[],this.queue=function(a){this.values.length>0?this.values.push(a):a(this.next)},this.next=function(){if(a.values.length>0){var b=this.values.pop();b()}}}c.exports={Queue:d}},"boneidle.shared":function(a,b,c){function e(a,b,c){a.hasNext(function(g){g?a.next(function(g){b(g,function(h){h?c(d.some(g)):f(function(){e(a,b,c)})})}):c(d.none())})}function f(a){typeof window!="undefined"?window.setTimeout(a,0):process.nextTick(a)}var d=b("./boneidle.option");c.exports={firstMatch:e,tick:f}},"boneidle.tuple":function(a,b,c){function d(a,b){this.__defineGetter__("first",function(){return a}),this.__defineGetter__("second",function(){return b})}c.exports={Pair:d}}});